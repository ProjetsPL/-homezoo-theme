<!DOCTYPE html>
<html lang="{{ page.full-lang | default: site.lang | default: 'en' }}">

{% include head.html %}

<link href="{{ site.baseurl }}/assets/css/pages/article.css?v=3" rel="stylesheet">

<body>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  {% if page.lang == "pl" %}
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v8.0" nonce="r5fqc9Oi"></script>
  {% endif %}
  {% include header.html %}

  <main class="page page-article">

    {% include breadcrumbs.html %}
    
    <div class="beams-wrapper  global-beam-wrapper article-content">
      <article class="beam b-size-5">
        <div class="beam-item b-size-3 article-text">
          <header class="article-header">
            <div class="detail-box">
              <span>{{ site.i18n[page.lang].updated }}: <time datetime="{{ page.update_date | date_to_xmlschema }}">{{page.update_date | date: '%d-%m-%Y'}}</time></span>
              <span class="article-label article-label-garden">{{ site.i18n[page.lang].home_and_garden }}</span>
            </div>
            <h1>{{ page.title }}</h1>

            {{ page.intro }}

            <figure>
              {% if page.image %}
              <img src='{{site.baseurl}}{{page.image}}' alt='{{ page.title | escape }}'></img>
              {% endif %}
            </figure>
          </header>

          <ins class="adsbygoogle"
              style="display:block"
              data-ad-format="fluid"
              data-ad-layout-key="-dx+59+ez-g3-g4"
              data-ad-client="ca-pub-2667869260064660"
              data-ad-slot="4714133490"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>

          <div class="flex-wrapper  nowrap">
              <div class="flex-container">


               {% for item in  related_products %}
                {% assign i = 0 %}
                {% assign related_products = page.related_products%}
                 {% assign products = site.products | where: "path", page.related_products[i]  %}
                 {% for item in  products %}
                 <div class="flex-item" >
                  {% include parts/product-listing-boxitem-md.html product=item %}
                </div>
                 {% endfor %}
                 {% assign i = i | plus: 1 %}
               {% endfor %}
             
              </div>
          </div>

          {{ content | inject_anchors | inject_ads }}

          <ins class="adsbygoogle"
              style="display:block"
              data-ad-format="fluid"
              data-ad-layout-key="-dx+59+ez-g3-g4"
              data-ad-client="ca-pub-2667869260064660"
              data-ad-slot="4714133490"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>

          <footer class="article-footer">
            <section class="publication-author">
              <div class="profile-photo">
                <img class="img" src="/assets/img/authors/dorota_czerwinska.png" alt="Dorota Czerwińska - Treehouse">
              </div>
              <div class="profile-details">
                <span class="name">Dorota Czerwińska</span>
                <span class="position">{{site.i18n[page.lang].autor_label}}</span>
                <p>{{site.i18n[page.lang].author_description}}</p>
                <a href="mailto:dorota@treehouse.co" class="more">{{site.i18n[page.lang].contact_label}}: dorota@treehouse.co</a>
              </div>
            </section>


            {% assign articles = site.posts | where: "lang", page.lang %}

            {% for i in (0..articles.size) %}
              {% if articles[i] != page %}
               {% continue %}
              {% endif %}

              {% assign prev_index = i | minus: 1 %}
              {% assign prev_article = articles[prev_index] %}

              {% assign last_index = articles.size | minus: 1 %}

              {% if i == last_index %}
                {% assign next_index = 0 %}
              {% else %}
                {% assign next_index = i | plus: 1 %}
              {% endif %}

              {% assign next_article = articles[next_index] %}

              {% break %}
            {% endfor %}


            <div class="other-publications">
              {% if prev_article.url and prev_article.lang == page.lang %}
                <a href="{{ prev_article.url | prepend: site.baseurl }}" class="previous">
                  <span class="label">{{site.i18n[page.lang].previous_article}}:</span>
                  <span class="title">{{prev_article.title}}</span>
                  <img class="arrow" src="/assets/img/more-arrow-md.svg" alt="Przeczytaj więcej">
                </a>
              {% endif %}

              {% if next_article.url and next_article.lang == page.lang %}
                <a href="{{ next_article.url | prepend: site.baseurl }}" class="next">
                  <span class="label">{{site.i18n[page.lang].next_article}}:</span>
                  <span class="title">{{next_article.title}}</span>
                  <img class="arrow" src="/assets/img/more-arrow-md.svg" alt="Przeczytaj więcej">
                </a>
              {% endif %}
            </div>
          </footer>
        </div>

        <div class="beam-item b-size-2 beam-rail  review-sidebar">
            <div class="beam-rail-item rail-sidebar r-height-auto">
                <div class="sticky-sidebar">
                  <nav class="table-of-content" id="some-stickybit-nav">
                    <span class="title">{{ site.i18n[page.lang].toc }}</span>
                    {{ content | toc_only }}
                  </nav>
                  {% if page.lang == "pl" %}
                  <div class="fb-page-wrapper">
                    <div class="fb-page" data-href="https://www.facebook.com/treehouseinspiruje/" data-tabs="" data-width="440" data-height="" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/treehouseinspiruje/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/treehouseinspiruje/">Treehouse</a></blockquote></div>
                  </div>
                  {% endif %}
                </div>
            </div>


            <!-- Related products - Filter -->

            {%assign products_with_lang = site.products | where: "lang" , page.lang %}
            {% assign products_collection = products_with_lang%}

            {% assign products_path_array = '' | split: ',' %}
          
            {% assign i = 0 %}
            {% assign related_products = page.related_products%}


              {% if page.use_related_products %}
                 <!-- Produkty przypisane ręcznie -->
                {% for item in  related_products %}
                  {% assign products = products_collection | where: "path", page.related_products[i]  %}
                  {% for product in  products %}

                  {% assign path_handle = product.path  | split: ',' %}
                  {% assign products_path_array = products_path_array | concat: path_handle %}

                  {% endfor %}
                  {% assign i = i | plus: 1 %}
                {% endfor %}

              
              {%elsif  page.products_category.size > 0  %}

                    
                    
                    {% if page.products_tags.size > 0 and page.property and page.property_value   %}
                      <!-- kategorie + tagi + właściwość -->
                      
                      {% for post_tag in page.products_tags  %}

                         {% assign products_collection = products_with_lang | where: page.property , page.property_value %}
                        <!-- Po przefiltrowaniu właściwości: {{products_collection.size}}<br> -->

                        {% for product in products_collection %}
                          {% for product_tag in product.tags %}                      
                            {% if product_tag == post_tag %}
                              {% assign path_handle = product.path  | split: ',' %}
                              {% assign products_path_array_check = products_path_array_check | concat: path_handle %}
                          
                            {% endif %}
                          {% endfor%}
                        {% endfor %}

                      {% endfor %}
                    
                      <!-- Po przefiltrowaniu tagów: {{products_path_array_check.size}}<br> -->

                      {% for post_category in page.products_category  %}
                        {% for product in products_collection %}
                          {% for product_category in product.category  %}
                            {% if product_category == post_category %}


                              {%for item in products_path_array_check %}
                                {%if product.path == item %}
                                {% assign path_handle = product.path  | split: ',' %}
                                  {% assign products_path_array = products_path_array | concat: path_handle %}
                                {%endif%}
                              {% endfor%}

                            {% endif %}
                          {% endfor%}
                        {% endfor %}
                      {% endfor %}
 
                      <!-- Po przefiltrowaniu kategorii:  {{products_path_array.size}}<br> --> 


                    
                    {% elsif page.products_tags.size > 0 %}                    
                      <!-- kategorie + tagi -->

                      {% for post_tag in page.products_tags  %}
                      
                        {% for product in products_collection %}
                          {% for product_tag in product.tags %}                      
                            {% if product_tag == post_tag %}
                              {% assign path_handle = product.path  | split: ',' %}
                              {% assign products_path_array_check = products_path_array_check | concat: path_handle %}
                          
                            {% endif %}
                          {% endfor%}
                        {% endfor %}

                      {% endfor %}
                    
                      <!-- Po przefiltrowaniu tagów: {{products_path_array_check.size}}<br> -->

                      {% for post_category in page.products_category  %}
                        {% for product in products_collection %}
                          {% for product_category in product.category  %}
                            {% if product_category == post_category %}

                              {%for item in products_path_array_check %}
                                {%if product.path == item %}
                                {% assign path_handle = product.path  | split: ',' %}
                                  {% assign products_path_array = products_path_array | concat: path_handle %}
                                {%endif%}
                              {% endfor%}

                            {% endif %}
                          {% endfor%}
                        {% endfor %}
                      {% endfor %}

                      <!-- Po przefiltrowaniu kategorii:  {{products_path_array.size}}<br> -->

                      

                    {% elsif page.property and page.property_value %}
                      <!-- kategorie + właściwość -->

                      {% for post_category in page.products_category  %}

                        {% assign products_collection = products_with_lang | where: page.property , page.property_value %}

                        <!-- Po przefiltrowaniu właściwości: {{products_collection.size}}<br> -->
                      
                        {% for product in products_collection %}
                          {% for product_category in product.category  %}
                            {% if product_category == post_category %}
                            
                              {% assign path_handle = product.path  | split: ',' %}
                              {% assign products_path_array = products_path_array | concat: path_handle %}

                            {% endif %}
                          {% endfor%}
                        {% endfor %}

                      {% endfor %}

                  
                    {%else %}

                      <!-- tylko kategorie  -->

                      {% for post_category in page.products_category  %}
                        {% for product in products_collection %}
                          {% for product_category in product.category  %}
                            {% if product_category == post_category %}
                            
                              {% assign path_handle = product.path  | split: ',' %}
                              {% assign products_path_array = products_path_array | concat: path_handle %}

                            {% endif %}
                          {% endfor%}
                        {% endfor %}
                      {% endfor %}


                    {%endif%}

              

              {%elsif  page.products_tags.size > 0  %}                   

                      
                      {% for post_tag in page.products_tags  %}

                        <!-- tag + właściwość -->
                        {% if page.property and page.property_value %}
                          {% assign products_collection = products_with_lang | where: page.property , page.property_value %}
                        {% endif %}

                        <!-- tag  -->
                        {% for product in products_collection %}
                          {% for product_tag in product.tags %}
                            {% if product_tag == post_tag %}

                              {% assign path_handle = product.path  | split: ',' %}
                              {% assign products_path_array = products_path_array | concat: path_handle %}

                            {% endif %}
                          {% endfor%}
                        {% endfor %}

                      {% endfor %}
                      
                    
              {%elsif  page.property and page.property_value  %}

                    <!-- właściwość  -->
                    {% assign products_collection = products_with_lang | where: page.property , page.property_value %}

                    {% for item in  products_collection %} 

                      {% assign path_handle = item.path  | split: ',' %}
                      {% assign products_path_array = products_path_array | concat: path_handle %}

                    {% endfor %} 


              {% else %}

                <!-- brak zdefiniowanych kategori tagów i właściwości  -->
                {% assign products = site.products | where: "lang", page.lang  %}
                {% for item in  products %}
                  {% assign path_handle = item.path  | split: ',' %}
                  {% assign products_path_array = products_path_array | concat: path_handle %}
                {% endfor %}


              {%endif%}
            <!-- End - Related products  - Filter -->
                

            <!-- Related products - display -->
            

            {% if page.use_related_products %}
              {% assign products_quantity = related_products.size %}          
            {% elsif page.products_quantity %}
              {% assign products_quantity = page.products_quantity %}          
            {% else %} 
              {% assign products_quantity = 10 %}
            {%endif%}


            {% assign unique_products_path_array = products_path_array  | uniq %}
            {% assign unique_products_path_quantity =  unique_products_path_array.size %}
                   
            {% if unique_products_path_quantity >= products_quantity %}

              <!--
                {{unique_products_path_array.size}} - tyle mamy unikalnych<br>
                 {{products_quantity}} - tyle potrzebujemy <br>
               -->

              {% assign mixed_unique_products_path_array = unique_products_path_array | sample: products_quantity%}

              {% for item in mixed_unique_products_path_array %}
                {% assign products = site.products | where: "path", item %}
                {% for item in products %}
                  <div class="beam-rail-item  r-height-auto">
                    <div class="sticky-element">
                      {% include parts/product-listing-boxitem-md.html product=item %}
                    </div>
                  </div>
                {% endfor %}
              {%endfor%}     
              
              <!-- 
                Zdeklarowane: {{page.products_quantity}}<br>       
                Pasujące (z powtórzeniami): {{products_path_array.size}}<br>     
                Unikalne: {{unique_products_path_array.size}}  
              -->

            {% else %}
                  

              {% assign rest_products_quantity =  products_quantity | minus: unique_products_path_quantity %}       

              
               <!-- 
                 {{unique_products_path_array.size}} - tyle mamy unikalnych<br>     
                 {{rest_products_quantity}} - tyle brakuje <br> 
                -->

               {%assign final_products_path_array = unique_products_path_array %}   


             {% assign  other_products_sample_quantity = rest_products_quantity  | plus:1%}
              {% assign products_if_need_one = products_with_lang | sample: other_products_sample_quantity  %}           

              {% assign products_if_need_more = products_with_lang | sample: rest_products_quantity  %}

              
              {% if rest_products_quantity == 1 %}
                  {% assign path_handle =  products_if_need_one[1].path  | split: ',' %}
                  {% assign final_products_path_array = final_products_path_array | concat: path_handle %}
              {% else %}
                {% for item in  products_if_need_more %}
                  {% assign path_handle = item.path  | split: ',' %}
                  {% assign final_products_path_array = final_products_path_array | concat: path_handle %}
                {% endfor %}
              {% endif %}
              
              {%assign mixed_final_products_path_array = final_products_path_array | sample: products_quantity %}

              {% for item in mixed_final_products_path_array %}
                {% assign products = site.products | where: "path", item %}
                {% for item in products %}
                  <div class="beam-rail-item  r-height-auto">
                    <div class="sticky-element">
                      {% include parts/product-listing-boxitem-md.html product=item %}
                    </div>
                  </div>
                {% endfor %}
              {%endfor%} 

            <!-- 
              Zdeklarowane: {{page.products_quantity}}<br>     
              Pasujące (z powtórzeniami)  {{products_path_array.size}} <br>       
              Unikalne: {{unique_products_path_array.size}}  <br>     
              Losowe: {{rest_products_quantity}} 
            -->

            
            {% endif %}
            <!-- End - Related products - display -->



        </div>
      </article>

      <section class="beam  b-size-4 featured-articles">
        <div class="beam-item b-size-4">
            <h2 class="h-section">{{site.i18n[page.lang].promoted_articles}}</h2>
        </div>

        {% assign promoted_articles = site.posts | where:"lang", page.lang | where:"promoted", true %}

        {% for article in promoted_articles limit: 4 %}
          <div class="beam-item b-size-1">
            {% include parts/articles-listing-boxitem-sm.html article=article %}
          </div>
        {% endfor %}
      </section>

      <section class="beam b-size-4 featured-articles">
        <div class="beam-item b-size-4">
          <h2 class="h-section">{{site.i18n[page.lang].maybe_interesting}}</h2>
        </div>

        <!-- <div class="beam-item b-size-4"> -->
          {% assign random_articles = site.posts | where:"lang", page.lang | sample: 8 %}

          {% for article in random_articles %}
            {% assign main_keywords = article.main_keywords | sample: 1 %}

            {% if main_keywords %}
              <a href="{{ article.url | prepend: site.baseurl }}" class="btn btn-sm btn-link">{{ main_keywords }}</a>
            {% endif %}
          {% endfor %}
        <!-- </div> -->
      </section>
    </div>
  </main>

  {% include footer.html %}

  {% include stickby-sidebar.html %}
  {% include stickby-element.html %}
  


  {% include all_pages_footer.html %}
</body>
</html>
